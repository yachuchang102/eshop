(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aabb3e50"],{"99af":function(t,a,i){"use strict";var n=i("23e7"),e=i("d039"),s=i("e8b5"),o=i("861d"),c=i("7b0b"),r=i("50c4"),u=i("8418"),d=i("65f0"),l=i("1dde"),p=i("b622"),h=i("2d00"),f=p("isConcatSpreadable"),g=9007199254740991,v="Maximum allowed index exceeded",b=h>=51||!e((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),m=l("concat"),C=function(t){if(!o(t))return!1;var a=t[f];return void 0!==a?!!a:s(t)},y=!b||!m;n({target:"Array",proto:!0,forced:y},{concat:function(t){var a,i,n,e,s,o=c(this),l=d(o,0),p=0;for(a=-1,n=arguments.length;a<n;a++)if(s=-1===a?o:arguments[a],C(s)){if(e=r(s.length),p+e>g)throw TypeError(v);for(i=0;i<e;i++,p++)i in s&&u(l,p,s[i])}else{if(p>=g)throw TypeError(v);u(l,p++,s)}return l.length=p,l}})},b789:function(t,a,i){"use strict";i.r(a);var n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"cart"},[i("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),i("div",{staticClass:"container"},[i("div",{staticClass:"my-5 row justify-content-center"},[i("div",{staticClass:"col-md-6"},[i("div",{staticClass:"text-right mb-3"},[i("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:t.removeAllCartItem}},[i("i",{staticClass:"far fa-trash-alt"},[t._v(" 刪除所有品項")])])]),i("table",{staticClass:"table"},[t._m(0),i("tbody",t._l(t.carts,(function(a){return i("tr",{key:a.id},[i("td",{staticClass:"align-middle"},[i("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(i){return t.removeCartItem(a.product.id)}}},[i("i",{staticClass:"far fa-trash-alt"})])]),i("td",{staticClass:"align-middle"},[t._v(t._s(a.product.title))]),i("td",{staticClass:"align-middle"},[i("div",{staticClass:"input-group"},[i("div",{staticClass:"input-group-prepend"},[i("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button",disabled:1===a.quantity},on:{click:function(i){a.quantity--,t.updateQuantity(a.product.id,a.quantity)}}},[t._v(" - ")])]),i("input",{directives:[{name:"model",rawName:"v-model",value:a.quantity,expression:"item.quantity"}],staticClass:"form-control text-center",attrs:{id:"inlineFormInputGroupUsername",type:"number",min:"1"},domProps:{value:a.quantity},on:{change:function(i){return t.updateQuantity(a.product.id,a.quantity)},input:function(i){i.target.composing||t.$set(a,"quantity",i.target.value)}}}),i("div",{staticClass:"input-group-append"},[i("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button",disabled:t.status.loadingUpdate===a.product.id},on:{click:function(i){a.quantity++,t.updateQuantity(a.product.id,a.quantity)}}},[t.status.loadingUpdate===a.product.id?i("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):i("span",[t._v("+")])])])])]),i("td",{staticClass:"align-middle"},[t._v(t._s(a.product.unit)+" ")]),i("td",{staticClass:"align-middle text-right"},[t._v(t._s(a.product.price)+" ")])])})),0),i("tfoot",[i("tr",[i("td",{staticClass:"text-right",attrs:{colspan:"4"}},[t._v(" 總計"+t._s(t.cartTotal)+" ")]),i("td",{staticClass:"text-right"})])])])])])])],1)},e=[function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("thead",[i("th",[t._v("刪除")]),i("th",[t._v("品名")]),i("th",{attrs:{width:"150px"}},[t._v(" 數量 ")]),i("th",[t._v("單位")]),i("th",[t._v("單價")])])}],s=(i("99af"),i("4160"),i("159b"),{name:"Cart",data:function(){return{tempProduct:{},products:[],isLoading:!1,status:{loadingItem:"",loadingUpdate:""},carts:[],cart:{},cartTotal:0}},methods:{getCart:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/api/").concat("f137c3aa-1698-4ffb-a6e2-7fe6ef1509c7","/ec/shopping");this.$http.get(a).then((function(a){t.isLoading=!1,console.log(a),t.carts=a.data.data,console.log(t.carts),t.updateTotal()})).catch((function(a){console.log(a.response),t.isLoading=!1}))},updateTotal:function(){var t=this;this.cartTotal=0,this.carts.forEach((function(a){t.cartTotal+=a.product.price*a.quantity,console.log(t.cartTotal)}))},updateQuantity:function(t,a){var i=this,n="".concat("https://course-ec-api.hexschool.io/api/").concat("f137c3aa-1698-4ffb-a6e2-7fe6ef1509c7","/ec/shopping");this.status.loadingUpdate=t;var e={product:t,quantity:a};this.$http.patch(n,e).then((function(t){i.status.loadingUpdate="",console.log(t),i.getCart()})).catch((function(t){console.log(t.response),i.status.loadingUpdate=""}))},removeCartItem:function(t){var a=this;this.isLoading=!0;var i="".concat("https://course-ec-api.hexschool.io/api/").concat("f137c3aa-1698-4ffb-a6e2-7fe6ef1509c7","/ec/shopping/").concat(t);this.$http.delete(i).then((function(){a.isLoading=!1,a.getCart(),a.updateTotal()}))},removeAllCartItem:function(){var t=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/api/").concat("f137c3aa-1698-4ffb-a6e2-7fe6ef1509c7","/ec/shopping/all/product");this.$http.delete(a).then((function(){t.isLoading=!1,t.getCart(),t.updateTotal()}))}},created:function(){this.getCart()}}),o=s,c=i("2877"),r=Object(c["a"])(o,n,e,!1,null,null,null);a["default"]=r.exports}}]);
//# sourceMappingURL=chunk-aabb3e50.7a6605b1.js.map